<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>ChatForm</title><link rel="stylesheet" type="text/css" href="../styles/main.css"><script language=JavaScript src="../javascript/main.js"></script><script language=JavaScript src="../javascript/prettify.js"></script><script language=JavaScript src="../javascript/searchdata.js"></script></head><body class="ContentPage" onLoad="NDOnLoad();prettyPrint();"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.52 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CClass"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="ChatForm"></a>ChatForm</h1><div class=CBody><p>Class representing a bulletin board chat form</p><p><a href="#ChatForm" class=LClass id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">ChatForm</a> handles all the details of a bulletin board conversation form.&nbsp; A <a href="#ChatForm" class=LClass id=link2 onMouseOver="ShowTip(event, 'tt1', 'link2')" onMouseOut="HideTip('tt1')">ChatForm</a> object is passed as the first parameter to the chat function supplied to <a href="LuaSpaceStation-cpp.html#SpaceStation.AddAdvert" class=LMethod id=link3 onMouseOver="ShowTip(event, 'tt2', 'link3')" onMouseOut="HideTip('tt2')">SpaceStation.AddAdvert</a> when the ad is created.&nbsp; The <a href="#ChatForm" class=LClass id=link4 onMouseOver="ShowTip(event, 'tt1', 'link4')" onMouseOut="HideTip('tt1')">ChatForm</a> object drives the user interface the player users to interact with the script.</p><p>As described in <a href="LuaSpaceStation-cpp.html#SpaceStation.AddAdvert" class=LMethod id=link5 onMouseOver="ShowTip(event, 'tt2', 'link5')" onMouseOut="HideTip('tt2')">SpaceStation.AddAdvert</a>, the chat function receives the ad reference and an action value.&nbsp; This function is responsible for calling methods on the <a href="#ChatForm" class=LClass id=link6 onMouseOver="ShowTip(event, 'tt1', 'link6')" onMouseOut="HideTip('tt1')">ChatForm</a> object to modify the user interface in response to the player&rsquo;s selections.</p><p>Here is a contrived example of a simple chat function.</p><blockquote><pre>local onChat = function (form, ref, option)
    form:Clear()

    -- option 0 is called when the form is first activated from the
    -- bulletin board
    if option == 0 then

        form:SetTitle(&quot;Favourite colour&quot;)
        form:SetMessage(&quot;What's your favourite colour?&quot;)

        form:AddOption(&quot;Red&quot;,       1)
        form:AddOption(&quot;Green&quot;,     2)
        form:AddOption(&quot;Yellow&quot;,    3)
        form:AddOption(&quot;Blue&quot;,      4)
        form:AddOption(&quot;Hang up.&quot;, -1)

        return
    end

    -- option 1 - red
    if option == 1 then
        form:SetMessage(&quot;Ahh red, the colour of raspberries.&quot;)
        form:AddOption(&quot;Hang up.&quot;, -1)
        return
    end

    -- option 2 - green
    if option == 2 then
        form:SetMessage(&quot;Ahh green, the colour of trees.&quot;)
        form:AddOption(&quot;Hang up.&quot;, -1)
        return
    end

    -- option 3 - yellow
    if option == 3 then
        form:SetMessage(&quot;Ahh yellow, the colour of the sun.&quot;)
        form:AddOption(&quot;Hang up.&quot;, -1)
        return
    end

    -- option 4 - blue
    if option == 4 then
        form:SetMessage(&quot;Ahh blue, the colour of the ocean.&quot;)
        form:AddOption(&quot;Hang up.&quot;, -1)
        return
    end

    -- only option left is -1, hang up
    form:Close()
end</pre></blockquote><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#ChatForm" >ChatForm</a></td><td class=SDescription>Class representing a bulletin board chat form</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#ChatForm.Methods" >Methods</a></td><td class=SDescription></td></tr><tr class="SMethod SIndent2 SMarked"><td class=SEntry><a href="#ChatForm.SetTitle" >SetTitle</a></td><td class=SDescription>Set the chat form title</td></tr><tr class="SMethod SIndent2"><td class=SEntry><a href="#ChatForm.SetFace" >SetFace</a></td><td class=SDescription>Set the properties used to generate the face</td></tr><tr class="SMethod SIndent2 SMarked"><td class=SEntry><a href="#ChatForm.SetMessage" >SetMessage</a></td><td class=SDescription>Set the chat form message</td></tr><tr class="SMethod SIndent2"><td class=SEntry><a href="#ChatForm.AddOption" >AddOption</a></td><td class=SDescription>Add a player-selectable chat option to the form</td></tr><tr class="SMethod SIndent2 SMarked"><td class=SEntry><a href="#ChatForm.Clear" >Clear</a></td><td class=SDescription>Remove all UI elements from the form</td></tr><tr class="SMethod SIndent2"><td class=SEntry><a href="#ChatForm.AddGoodsTrader" >AddGoodsTrader</a></td><td class=SDescription>Adds a goods trader widget to the form</td></tr><tr class="SMethod SIndent2 SMarked"><td class=SEntry><a href="#ChatForm.Close" >Close</a></td><td class=SDescription>Closes the form and returns the player to the bulletin board</td></tr><tr class="SMethod SIndent2"><td class=SEntry><a href="#ChatForm.GotoPolice" >GotoPolice</a></td><td class=SDescription>Aborts the chat form and takes the player to the station police screen</td></tr><tr class="SMethod SIndent2 SMarked"><td class=SEntry><a href="#ChatForm.RemoveAdvertOnClose" >RemoveAdvertOnClose</a></td><td class=SDescription>Flags that the advert attached the form should be removed from the bulletin board when the form closes</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="ChatForm.Methods"></a>Methods</h3></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="ChatForm.SetTitle"></a>SetTitle</h3><div class=CBody><p>Set the chat form title</p><blockquote><pre>form:SetTitle(title)</pre></blockquote><p>The form title is the text that appears just above the video link display.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>title</td><td class=CDLDescription>the title text</td></tr></table><h4 class=CHeading>Example</h4><blockquote><pre>form:SetTitle(&quot;Andrews Holding&quot;)</pre></blockquote><h4 class=CHeading>Availability</h4><p>alpha 10</p><h4 class=CHeading>Status</h4><p>stable</p></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="ChatForm.SetFace"></a>SetFace</h3><div class=CBody><p>Set the properties used to generate the face</p><blockquote><pre>form:SetFace({
    female = female,
    armour = armour,
    seed   = seed,
    name   = name,
    title  = title,
})</pre></blockquote><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>female</td><td class=CDLDescription>if true, the face will be female.&nbsp; If false, the face will be male.&nbsp; If not specified, a gender will be chosen at random.</td></tr><tr><td class=CDLEntry>armour</td><td class=CDLDescription>if true, the face will wear armour, otherwise the face will have clothes and accessories.</td></tr><tr><td class=CDLEntry>seed</td><td class=CDLDescription>the seed for the random number generator. if not specified, the station seed will be used. if 0, a random seed will be generated</td></tr><tr><td class=CDLEntry>name</td><td class=CDLDescription>name of the person.&nbsp; If not specified, a random one will be generated.</td></tr><tr><td class=CDLEntry>title</td><td class=CDLDescription>the person&rsquo;s job or other suitable title.&nbsp; If not specified, nothing will be shown.</td></tr></table><h4 class=CHeading>Example</h4><blockquote><pre>form:SetFace({
    female = true,
    armour = false,
    seed   = 1234,
    name   = &quot;Steve&quot;,
    title  = &quot;Station manager&quot;,
})</pre></blockquote><h4 class=CHeading>Availability</h4><p>alpha 10</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="ChatForm.SetMessage"></a>SetMessage</h3><div class=CBody><p>Set the chat form message</p><blockquote><pre>form:SetMessage(message)</pre></blockquote><p>The form message is the text that appears at the top of the form display, above the options.</p><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>title</td><td class=CDLDescription>the message text</td></tr></table><h4 class=CHeading>Example</h4><blockquote><pre>form:SetMessage(&quot;I need a fast ship to take a package to Epsilon Eridani. I will pay $123.45&quot;)</pre></blockquote><h4 class=CHeading>Availability</h4><p>alpha 10</p><h4 class=CHeading>Status</h4><p>stable</p></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="ChatForm.AddOption"></a>AddOption</h3><div class=CBody><p>Add a player-selectable chat option to the form</p><blockquote><pre>form:AddOption(text, opt)</pre></blockquote><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>text</td><td class=CDLDescription>the option text</td></tr><tr><td class=CDLEntry>opt</td><td class=CDLDescription>an integer value. this will be passed as the third parameter to the chat function if this option is selected by the player</td></tr></table><h4 class=CHeading>Example</h4><blockquote><pre>form:AddOption(&quot;Why so much money?&quot;, 1)</pre></blockquote><h4 class=CHeading>Availability</h4><p>alpha 10</p><h4 class=CHeading>Status</h4><p>stable</p></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="ChatForm.Clear"></a>Clear</h3><div class=CBody><p>Remove all UI elements from the form</p><blockquote><pre>form:Clear()</pre></blockquote><p><a href="#ChatForm.Clear" class=LMethod id=link7 onMouseOver="ShowTip(event, 'tt3', 'link7')" onMouseOut="HideTip('tt3')">Clear</a> will remove all UI elements attached to the form.&nbsp; This includes the form message set with <a href="#ChatForm.SetMessage" class=LMethod id=link8 onMouseOver="ShowTip(event, 'tt4', 'link8')" onMouseOut="HideTip('tt4')">SetMessage</a>, all options added with <a href="#ChatForm.AddOption" class=LMethod id=link9 onMouseOver="ShowTip(event, 'tt5', 'link9')" onMouseOut="HideTip('tt5')">AddOption</a> and the goods trader component set with <a href="#ChatForm.AddGoodsTrader" class=LMethod id=link10 onMouseOver="ShowTip(event, 'tt6', 'link10')" onMouseOut="HideTip('tt6')">AddGoodsTrader</a>.</p><p>It will not remove the title set with <a href="#ChatForm.SetTitle" class=LMethod id=link11 onMouseOver="ShowTip(event, 'tt7', 'link11')" onMouseOut="HideTip('tt7')">SetTitle</a>.</p><h4 class=CHeading>Availability</h4><p>alpha 10</p><h4 class=CHeading>Status</h4><p>stable</p></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="ChatForm.AddGoodsTrader"></a>AddGoodsTrader</h3><div class=CBody><p>Adds a goods trader widget to the form</p><blockquote><pre>form:AddGoodsTrader({
    canTrade    = function (ref, commodity) ... end,
    getStock    = function (ref, commodity) ... end,
    getPrice    = function (ref, commodity) ... end,
    onClickBuy  = function (ref, commodity) ... end,
    onClickSell = function (ref, commodity) ... end,
    bought      = function (ref, commodity) ... end,
    sold        = function (ref, commodity) ... end,
})</pre></blockquote><p>The goods trader widget is the same interface you see in the &ldquo;commodity market&rdquo; area of the space station services menu.&nbsp; <a href="#ChatForm.AddGoodsTrader" class=LMethod id=link12 onMouseOver="ShowTip(event, 'tt6', 'link12')" onMouseOut="HideTip('tt6')">AddGoodsTrader</a> adds a version of this widget to your chat form.</p><p>Note that the trade widget can only handle the trade of commodity cargo items.&nbsp; Ship equipment can not be traded this way.</p><p>Your script must provide seven functions to this method to make the widget work.&nbsp; Each one handles an aspect of the trade process.</p><h4 class=CHeading>Parameters</h4><p>Each function takes two parameters</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>ref</td><td class=CDLDescription>the ad reference returned by <a href="LuaSpaceStation-cpp.html#SpaceStation.AddAdvert" class=LMethod id=link13 onMouseOver="ShowTip(event, 'tt2', 'link13')" onMouseOut="HideTip('tt2')">SpaceStation.AddAdvert</a></td></tr><tr><td class=CDLEntry>commodity</td><td class=CDLDescription>a <a href="LuaConstants-cpp.html#Constants.EquipType" class=LConstant id=link14 onMouseOver="ShowTip(event, 'tt8', 'link14')" onMouseOut="HideTip('tt8')">Constants.EquipType</a> string for a single commodity (cargo) item</td></tr></table><p>The functions themselves are passed to <a href="#ChatForm.AddGoodsTrader" class=LMethod id=link15 onMouseOver="ShowTip(event, 'tt6', 'link15')" onMouseOut="HideTip('tt6')">AddGoodsTrader</a> in a table with the following keys</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>canTrade</td><td class=CDLDescription>returns true if this script is willing to trade in this commodity, or false otherwise</td></tr><tr><td class=CDLEntry>getStock</td><td class=CDLDescription>returns the number of units of this commodity the script has available for trade</td></tr><tr><td class=CDLEntry>getPrice</td><td class=CDLDescription>returns the price for a single unit of this commodity</td></tr><tr><td class=CDLEntry>onClickBuy</td><td class=CDLDescription>called immediately when the player clicks the &ldquo;buy&rdquo; button. returns true if the buy should be allowed, false otherwise.&nbsp; If true is returned, a message will be shown to the player, and the player&rsquo;s cargo and money will be updated.</td></tr><tr><td class=CDLEntry>onClickSell</td><td class=CDLDescription>called immediately when the player clicks the &ldquo;sell&rdquo; button. returns true if the sale should be allowed, false otherwise.&nbsp; If true is returned, a message will be shown to the player, and the player&rsquo;s cargo and money will be updated.</td></tr><tr><td class=CDLEntry>bought</td><td class=CDLDescription>called after a buy has been completed</td></tr><tr><td class=CDLEntry>sold</td><td class=CDLDescription>called after a sale has been completed</td></tr></table><h4 class=CHeading>Availability</h4><p>alpha 10</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="ChatForm.Close"></a>Close</h3><div class=CBody><p>Closes the form and returns the player to the bulletin board</p><blockquote><pre>form:Close()</pre></blockquote><h4 class=CHeading>Availability</h4><p>alpha 10</p><h4 class=CHeading>Status</h4><p>stable</p></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="ChatForm.GotoPolice"></a>GotoPolice</h3><div class=CBody><p>Aborts the chat form and takes the player to the station police screen</p><blockquote><pre>form:GotoPolice()</pre></blockquote><h4 class=CHeading>Availability</h4><p>alpha 10</p><h4 class=CHeading>Status</h4><p>experimental</p></div></div></div>

<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="ChatForm.RemoveAdvertOnClose"></a>RemoveAdvertOnClose</h3><div class=CBody><p>Flags that the advert attached the form should be removed from the bulletin board when the form closes</p><blockquote><pre>form:RemoveAdvertOnClose()</pre></blockquote><p>This does not actually close the form, it simply sets an internal flag that will be acted upon at close.</p><h4 class=CHeading>Availability</h4><p>alpha 10</p><h4 class=CHeading>Status</h4><p>stable</p></div></div></div>

</div><!--Content-->


<div id=Footer><a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class=MEntry><div class=MFile><a href="LuaBody-cpp.html">Body</a></div></div><div class=MEntry><div class=MFile><a href="LuaCargoBody-cpp.html">CargoBody</a></div></div><div class=MEntry><div class=MFile id=MSelected>ChatForm</div></div><div class=MEntry><div class=MFile><a href="LuaConsole-cpp.html">Console</a></div></div><div class=MEntry><div class=MFile><a href="LuaConstants-cpp.html">Constants</a></div></div><div class=MEntry><div class=MFile><a href="LuaEngine-cpp.html">Engine</a></div></div><div class=MEntry><div class=MFile><a href="LuaEquipType-cpp.html">EquipType</a></div></div><div class=MEntry><div class=MFile><a href="LuaEventQueue-cpp.html">EventQueue</a></div></div><div class=MEntry><div class=MFile><a href="LuaFormat-cpp.html">Format</a></div></div><div class=MEntry><div class=MFile><a href="LuaGame-cpp.html">Game</a></div></div><div class=MEntry><div class=MFile><a href="LmrModel-cpp.html">LMR</a></div></div><div class=MEntry><div class=MFile><a href="LuaMusic-cpp.html">Music</a></div></div><div class=MEntry><div class=MFile><a href="LuaNameGen-cpp.html">NameGen</a></div></div><div class=MEntry><div class=MFile><a href="LuaObject-cpp.html">Object</a></div></div><div class=MEntry><div class=MFile><a href="LuaPlanet-cpp.html">Planet</a></div></div><div class=MEntry><div class=MFile><a href="LuaPlayer-cpp.html">Player</a></div></div><div class=MEntry><div class=MFile><a href="LuaRand-cpp.html">Rand</a></div></div><div class=MEntry><div class=MFile><a href="LuaShip-cpp.html">Ship</a></div></div><div class=MEntry><div class=MFile><a href="LuaShipType-cpp.html">ShipType</a></div></div><div class=MEntry><div class=MFile><a href="LuaSpace-cpp.html">Space</a></div></div><div class=MEntry><div class=MFile><a href="LuaSpaceStation-cpp.html">SpaceStation</a></div></div><div class=MEntry><div class=MFile><a href="LuaStar-cpp.html">Star</a></div></div><div class=MEntry><div class=MFile><a href="LuaStarSystem-cpp.html">StarSystem</a></div></div><div class=MEntry><div class=MFile><a href="LuaSBody-cpp.html">SystemBody</a></div></div><div class=MEntry><div class=MFile><a href="LuaSystemPath-cpp.html">SystemPath</a></div></div><div class=MEntry><div class=MFile><a href="LuaTimer-cpp.html">Timer</a></div></div><div class=MEntry><div class=MFile><a href="LuaUI-cpp.html">UI</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">Index</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MIndex><a href="../index/General.html">Everything</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Classes.html">Classes</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Functions.html">Functions</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Interfaces.html">Interfaces</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Events.html">Events</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Attributes.html">Attributes</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Methods.html">Methods</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Constants.html">Constants</a></div></div></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="Attributes">Attributes</option><option value="Classes">Classes</option><option value="Constants">Constants</option><option value="Events">Events</option><option value="Functions">Functions</option><option value="Interfaces">Interfaces</option><option value="Methods">Methods</option></select></div><script language=JavaScript><!--
HideAllBut([], 2);// --></script></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CClass>Class representing a bulletin board chat form</div></div><div class=CToolTip id="tt2"><div class=CMethod>Add an advertisement to the station&rsquo;s bulletin board</div></div><div class=CToolTip id="tt3"><div class=CMethod>Remove all UI elements from the form</div></div><div class=CToolTip id="tt4"><div class=CMethod>Set the chat form message</div></div><div class=CToolTip id="tt5"><div class=CMethod>Add a player-selectable chat option to the form</div></div><div class=CToolTip id="tt6"><div class=CMethod>Adds a goods trader widget to the form</div></div><div class=CToolTip id="tt7"><div class=CMethod>Set the chat form title</div></div><div class=CToolTip id="tt8"><div class=CConstant>Equipment and cargo types. </div></div><!--END_ND_TOOLTIPS-->




<div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div>


<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>